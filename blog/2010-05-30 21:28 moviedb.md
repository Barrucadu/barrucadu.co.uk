For a while now I've been working on a set of scripts to manage my movie collection, known collectively as **moviedb**. Originally, there was only one script, and its sole purpose was to help me find movies when my main php+mysql database wasn't working, as I store my movies by director. The other day, I deleted that main system, as moviedb had grown to the point where I can use it exclusively; it now comprises several scripts, and has much more functionality than the original.

### What is it?

Put simply, it manages a hierarchy of symlinks, directories, and video files. The hierarchy managed can be seen below:

    $MOVIEPATH
    ├── by-director
    │   ├── Director 1
    │   ├── Director 2
    │   ├── ...
    │   └── Director n
    └── by-genre
        ├── Genre 1
        ├── Genre 2
        ├── ...
        └── Genre n

Each **Director** directory contains video files, and each **Genre** directory contains symlinks. Obviously, the **by-genre** hierarchy is more human-friendly to traverse manually (which is why I added it), as it's far easier to remember what a movie is about than who it is by. However, because genre is subjective (and most movies have multiple genres), it's not the primary method of storage, which is why the **by-director** hierarchy exists.

### The scripts

Like I said, **moviedb** now comprises several scripts:

    moviedb: A tool to manage and query the filesystem movie database

    Usage: moviedb <command> <args>

    Commands:
        add   : Add a new movie to the database.
        lists : Manage and use movie playlists.
        menu  : Launch the dmenu-based movie menu.
        misc  : Backup or restore the database.
        play  : Play movies.
        query : Search for movies.
    See the individual command help for more details.

    Return codes:
        1 = Unknown command.
    Maintainer: Michael Walker

moviedb
: is now just a 'gateway' script, it passes on your request to the other scripts.

moviedb-add
: adds a movie to the database, you give it the file path, director, and genres of the movie and it will move the file to the appropriate place, and create the appropriate symlinks for you. This is a fairly recent addition, until just the other day I was still doing this manually.

moviedb-lists
: is a simple playlist implementation, for managing .m3u playlists. I use this for films with sequels.

moviedb-menu
: uses dmenu to present a way to browse movies by director, genre, playlist, or at random. I must admit, this is probably the script I use least.

moviedb-misc
: is another recent addition, this backs up and restores (either all or one file) the database, so if anything happens and, say, I lose my **by-genre** hierarchy, I can regenerate it.

moviedb-play
: is, as you can guess, a script to play the named movie. It's fairly simple.

moviedb-query
: is used to get information about movies, such as genres, file path, list all movies, *et cetera*.

So, it's a fairly useful set of scripts. I don't know how I'd cope without it now.

### Future?

Well, **moviedb-query** is very slow, as it needs to traverse the hierarchy for every request, which makes **moviedb-misc** also very slow when generating a backup. I'm considering rewriting it all in Python, to still make use of the filesystem hierarchy, but also maintain a SQLite database for fast querying and backing up.

I have also considered writing a variation (or even perhaps a replacement) of **moviedb-menu** which uses **dialog** to present a menu in the terminal.

Other than that, I don't know what I'd change. I have thought about a **moviedb-rm** script, but I don't think I've ever deleted one of my movies once it's sorted into the hierarchy, as I ususally watch it before storing, so I don't know if I'd ever use it.
